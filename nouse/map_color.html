<!DOCTYPE html> 
<html> 
<head> 
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
<meta charset="UTF-8" /> 
<title>5号館2階　混雑状況</title> 
</head> 
<body>
<h1>5号館2階　混雑状況</h1>
<p>赤：使用不可　黄：混雑　青：使用可</p>
<svg width="1280" height="720" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" overflow="hidden"><defs><clipPath id="clip0">
    <rect x="0" y="0" width="1280" height="720"/></clipPath></defs><g clip-path="url(#clip0)"><rect x="0" y="0" width="1280" height="720" fill="#FFFFFF"/>
    <rect id="5235" x="119.5" y="85.5001" width="289" height="207" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="none"/><text font-family="Yu Gothic,Yu Gothic_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(236.627 196)">523<tspan font-size="24" x="40" y="0">5</tspan></text>
    <rect id="5233" x="408.5" y="85.5001" width="289" height="207" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="none"/>
    <text font-family="Yu Gothic,Yu Gothic_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(526.039 196)">5233</text>
    <rect id="5236" x="119.5" y="396.5" width="289" height="207" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="none"/>
    <text font-family="Yu Gothic,Yu Gothic_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(236.627 507)">5236</text>
    <rect id="5234" x="407.5" y="396.5" width="289" height="207" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="none"/>
    <text font-family="Yu Gothic,Yu Gothic_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(525.099 507)">5234</text><path d="M119.5 292.5 119.5 396.753" stroke="#000000" stroke-width="0.666667" stroke-miterlimit="8" fill="none" fill-rule="evenodd"/></g></svg>
</svg>
<script type="text/javascript">
    const domain = document.domain
    const protocol = location.protocol
    const url = `${protocol}//${domain}`
    var socketio = io(url, {transports:['polling']});
      $(function(){
          socketio.on('message',function(msg){
              let data=msg
              console.log(data)
              if(data.count>=3){
                change_color(data.id + "","#ff0000")
                console.log(data.id)
              }else{
                console.log(data.count)
                  console.log("test")
              }
          });
        });
    function change_color(id,color_code){
        var poly = document.getElementById(id);
        console.log(poly)
        poly.setAttribute("fill", color_code);
    //poly.setAttribute("stroke", "black");
    }
    </script>
</body> 
</html>